!function(t){"use strict";t.module("mjr.rut",[])}(angular),function(t){"use strict";function r(){function r(t){return this.value=t,this}function n(t){var r=f(t);if(l(r))throw"Invalid Argument: sRutSinDigitoVerificador";return e(r)}function e(t){var n,e="K",i=2,u=7,o=i-1,a=new r(f(t)).reverse(),s=a.sum(function(t){return o=o==u?i:++o,o*parseInt(t)}),c=s%11;switch(c){case 0:n="0";break;case 1:n=e;break;default:n=(11-c).toString()}return n}function i(t,n,e,i,u){var o=f(t);if(l(o))return"";if(g(o))return o;if(n=n||!0,e=e||!0,i=i||".",u=u||"-",o.length<A)return o;var a=function(t,r){for(;t.length>A;)r.insert(0,i+t.substring(t.length-A)),t=t.substring(0,t.length-A);return r.insert(0,t),r},s=o.charAt(o.length-1),c=o.substring(0,o.length-1),h=n?a(c,new r("")):new r(c);return e&&h.append(u),h.append(s).toString()}function u(t){if(l(t))return"";if(g(t)||!p(t))return t;var r=parseInt(f(t.substring(0,t.length-1)));return r}function o(t){return t.substring(0,t.length-1)}function a(t){if(l(t))throw"Invalid Argument: sRutCompleto";return p(t)?s(t):""}function s(t){return t.charAt(t.length-1)}function f(t){if(l(t))return"";var r=t;return r.replace(/[^0-9|k|K]/g,"")}function c(t){return/^[\d|k|K]$/.test(t)}function l(t){return null==t?!0:"string"!=typeof t?!1:!/\S/.test(t)}function g(t){return t.length<A}function h(t){return l(t)||t.length<A}function m(){return 1==arguments.length?p(arguments[0]):v(arguments[0],arguments[1])}function p(t){if(h(t))return!1;var r=o(t),n=s(t);return d(r,n)}function v(t,r){return l(r)||l(t)?!1:d(t,r)}function d(t,r){var n=f(t);return!l(n)&&r===e(t)}r.prototype.append=function(t){return this.value=this.value+t,this},r.prototype.toString=function(){return this.value},r.prototype.charAt=String.prototype.charAt,r.prototype.insert=function(t,r){return this.value=this.value.slice(0,t)+r+this.value.slice(t),this},r.prototype.reverse=function(){for(var t="",r=this.value.length-1;r>=0;r--)t+=this.value[r];return t},String.prototype.sum=function(t){for(var r=0,n=0;n<this.length;n++)r+=t(this[n]);return r};var A=3,y={format:i,removeFormat:f,isDigitoVerificadorValidChar:c,calculateDigitoVerificador:n,isRutValid:m,getRutSinDigitoVerificador:u,getDigitoVerificador:a};return t.extend({},y,{$get:function(){return y}})}t.module("mjr.rut").provider("rutApi",r)}(angular),function(t){"use strict";function r(){return{restrict:"EA",require:"?ngModel",templateUrl:"rutInputTemplate.html",scope:{formatOptions:"@"}}}t.module("mjr.rut").directive("rutInput",r)}(angular),function(t){"use strict";function r(t){function r(r,n,e,i){function u(r){var n=t.isRutValid(r);return i.$setValidity("rutValidator",n),n}i.$parsers.unshift(function(t){var r=u(t);return r?t:void 0}),i.$formatters.unshift(function(t){return u(t),t})}return{restrict:"A",require:"ngModel",link:r}}r.$inject=["rutApi"],t.module("mjr.rut").directive("rutValidator",r)}(angular),function(t){"use strict";function r(r){function n(n,e,i,u){if(u){var o,a={formatBody:!0,formatDv:!0,bodyDelimiter:".",dvDelimiter:"-"};try{o=JSON.parse(i.rutFormatter)}catch(s){throw"format options are not in a valid json format."}t.extend({},a,o);u.$formatters.unshift(function(){var t=r.format(u.$modelValue);return t}),u.$parsers.unshift(function(t){var n=r.format(t);return e.val(n),n})}}return{restrict:"A",require:"?ngModel",link:n}}r.$inject=["rutApi"],t.module("mjr.rut").directive("rutFormatter",r)}(angular),function(t){"use strict";function r(t){return function(r){var n=t.format(r);return n}}r.$inject=["rutApi"],t.module("mjr.rut").filter("rutFilter",r)}(angular);
